/*! For license information please see 169.2f983d78.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkleave_tracking_app=self.webpackChunkleave_tracking_app||[]).push([[169],{24:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(784).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},169:(e,s,t)=>{t.r(s),t.d(s,{default:()=>L});var a=t(43),r=t(24),l=t(245),n=t(118),i=t(884),o=t(88),d=t(784);const c=(0,d.A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),m=(0,d.A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var x=t(54),h=t(855),p=t(646),u=t(819),g=t(6),b=t(210),y=t(614),j=t(16),f=t(579);const v={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8000",N=e=>{let{onApprovalChange:s}=e;const{token:t}=(0,j.A)(),[r,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null),[m,x]=(0,a.useState)(null),h=(0,a.useCallback)(async()=>{if(t)try{i(!0),c(null);const e=await fetch(`${v}/api/leaves/pending`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(e.ok){const s=await e.json();l(s)}else 403===e.status?c("Manager access required to view pending leaves"):c("Failed to fetch pending leaves")}catch(e){console.error("Fetch pending leaves error:",e),c("Network error. Please try again.")}finally{i(!1)}},[t]);(0,a.useEffect)(()=>{h()},[h]);const N=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),w=e=>{switch(e){case"EL":return"bg-green-100 text-green-800";case"SL":return"bg-blue-100 text-blue-800";case"CL":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},k=e=>{switch(e){case"EL":return"Earned Leave";case"SL":return"Sick Leave";case"CL":return"Casual Leave";default:return e}};return n?(0,f.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,f.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,f.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,f.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading pending leaves..."})]})}):d?(0,f.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,f.jsx)("div",{className:"flex items-center justify-center py-8 text-center",children:(0,f.jsxs)("div",{children:[(0,f.jsx)(u.A,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,f.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Leaves"}),(0,f.jsx)("p",{className:"text-gray-600 mb-4",children:d}),(0,f.jsx)("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Try Again"})]})})}):(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Leave Approvals"}),(0,f.jsx)("p",{className:"text-gray-600 mt-1",children:0===r.length?"No pending leave requests":`${r.length} pending leave request${1===r.length?"":"s"}`})]}),(0,f.jsx)("button",{onClick:h,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Refresh"})]})}),0===r.length?(0,f.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[(0,f.jsx)(o.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,f.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"All Caught Up!"}),(0,f.jsx)("p",{className:"text-gray-600",children:"No pending leave requests to review."})]}):(0,f.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,f.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,f.jsxs)("div",{className:"flex items-start justify-between",children:[(0,f.jsxs)("div",{className:"flex-1",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,f.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:e.user.name.split(" ").map(e=>e[0]).join("").toUpperCase()}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.user.name}),(0,f.jsx)("p",{className:"text-sm text-gray-500",children:e.user.email})]})]}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,f.jsx)(p.A,{className:"w-4 h-4 text-gray-400"}),(0,f.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,f.jsx)("strong",{children:"Dates:"})," ",N(e.fromDate)," - ",N(e.toDate)]})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,f.jsx)(o.A,{className:"w-4 h-4 text-gray-400"}),(0,f.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,f.jsx)("strong",{children:"Duration:"})," ",e.days," day",1===e.days?"":"s"]})]}),(0,f.jsx)("div",{className:"flex items-center space-x-2",children:(0,f.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${w(e.leaveType)}`,children:k(e.leaveType)})}),e.destination&&(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,f.jsx)(g.A,{className:"w-4 h-4 text-gray-400"}),(0,f.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,f.jsx)("strong",{children:"Destination:"})," ",e.destination]})]})]}),(0,f.jsxs)("div",{className:"text-xs text-gray-500 mb-4",children:["Submitted on ",new Date(e.submittedAt).toLocaleString()]})]}),(0,f.jsxs)("div",{className:"flex flex-col space-y-2 ml-6",children:[(0,f.jsxs)("button",{onClick:()=>(async e=>{if(t)try{x(e);const a=await fetch(`${v}/api/leaves/${e}/approve`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({reason:"Approved by manager"})});if(a.ok)l(s=>s.filter(s=>s._id!==e)),s&&s(),alert("Leave request approved successfully!");else{const e=await a.json();alert(`Error: ${e.error}`)}}catch(a){console.error("Approve leave error:",a),alert("Failed to approve leave request. Please try again.")}finally{x(null)}})(e._id),disabled:m===e._id,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,f.jsx)(b.A,{className:"w-4 h-4"}),(0,f.jsx)("span",{children:"Approve"})]}),(0,f.jsxs)("button",{onClick:()=>(async e=>{if(!t)return;const a=prompt("Please provide a reason for rejection:");if(a&&0!==a.trim().length)try{x(e);const r=await fetch(`${v}/api/leaves/${e}/reject`,{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({reason:a.trim()})});if(r.ok)l(s=>s.filter(s=>s._id!==e)),s&&s(),alert("Leave request rejected successfully!");else{const e=await r.json();alert(`Error: ${e.error}`)}}catch(r){console.error("Reject leave error:",r),alert("Failed to reject leave request. Please try again.")}finally{x(null)}else alert("Rejection reason is required.")})(e._id),disabled:m===e._id,className:"flex items-center space-x-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,f.jsx)(y.A,{className:"w-4 h-4"}),(0,f.jsx)("span",{children:"Reject"})]})]})]})},e._id))})]})},w={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:8000":"https://leave-tracking-backend.onrender.com");function k(e){let{members:s,showAddMember:t,setShowAddMember:a,onRemoveMember:r,onAddMember:l}=e;return(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between space-y-3 sm:space-y-0",children:[(0,f.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Team Members (",s.length,")"]}),(0,f.jsxs)("button",{onClick:()=>a(!t),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center justify-center space-x-2 transition-colors w-full sm:w-auto",children:[(0,f.jsx)(i.A,{size:18}),(0,f.jsx)("span",{children:"Add Member"})]})]}),t&&(0,f.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6",children:[(0,f.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Team Member"}),(0,f.jsx)("form",{onSubmit:l,className:"space-y-4",children:(0,f.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"memberEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,f.jsx)("input",{id:"memberEmail",type:"email",name:"email",required:!0,placeholder:"user@company.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"memberPosition",className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Position"}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsxs)("select",{id:"memberPosition",name:"position",required:!0,className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[(0,f.jsx)("option",{value:"",children:"Select job position"}),(0,f.jsx)("option",{value:"Senior Developer",children:"Senior Developer"}),(0,f.jsx)("option",{value:"Junior Developer",children:"Junior Developer"}),(0,f.jsx)("option",{value:"Frontend Developer",children:"Frontend Developer"}),(0,f.jsx)("option",{value:"Backend Developer",children:"Backend Developer"}),(0,f.jsx)("option",{value:"Full Stack Developer",children:"Full Stack Developer"}),(0,f.jsx)("option",{value:"DevOps Engineer",children:"DevOps Engineer"}),(0,f.jsx)("option",{value:"UI Designer",children:"UI Designer"}),(0,f.jsx)("option",{value:"UX Designer",children:"UX Designer"}),(0,f.jsx)("option",{value:"Product Manager",children:"Product Manager"}),(0,f.jsx)("option",{value:"Project Manager",children:"Project Manager"}),(0,f.jsx)("option",{value:"QA Engineer",children:"QA Engineer"}),(0,f.jsx)("option",{value:"Data Analyst",children:"Data Analyst"}),(0,f.jsx)("option",{value:"Business Analyst",children:"Business Analyst"}),(0,f.jsx)("option",{value:"Technical Writer",children:"Technical Writer"}),(0,f.jsx)("option",{value:"Intern",children:"Intern"}),(0,f.jsx)("option",{value:"Consultant",children:"Consultant"}),(0,f.jsx)("option",{value:"Other",children:"Other"})]}),(0,f.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,f.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),(0,f.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-end space-y-2 sm:space-y-0 sm:space-x-2",children:[(0,f.jsx)("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex-1",children:"Add"}),(0,f.jsx)("button",{type:"button",onClick:()=>a(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-lg transition-colors flex-1",children:"Cancel"})]})]})})]}),(0,f.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(e=>(0,f.jsx)(A,{member:e,onRemove:r},e._id||e.id))})]})}function A(e){let{member:s,onRemove:t}=e;const[r,l]=(0,a.useState)(!1),n=s.name.split(" ").map(e=>e[0]).join("").toUpperCase();return(0,f.jsxs)("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg border border-gray-200 p-4 hover:shadow-md transition-all duration-200 relative",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[(0,f.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,f.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:n}),(0,f.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("h4",{className:"text-lg font-semibold text-gray-900 truncate",children:s.name}),(0,f.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,f.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,f.jsx)(x.A,{size:12,className:"mr-1"}),s.role||"Employee"]}),(0,f.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:s.position||"Employee"})]})]}),(0,f.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:s.email})]})]}),r&&(0,f.jsx)("button",{onClick:()=>t(s._id),className:"absolute top-2 right-2 bg-red-100 hover:bg-red-200 text-red-600 p-2 rounded-lg transition-colors",title:"Remove member",children:(0,f.jsx)(h.A,{size:16})})]})}function C(e){let{leaves:s,members:t,statistics:a,teamData:r}=e;const i=a||{totalMembers:t.length,currentlyOnLeave:s.filter(e=>"current"===e.status).length,availabilityPercent:100,upcomingLeaves:s.filter(e=>"upcoming"===e.status).length,totalLeaves:s.length};s.filter(e=>"upcoming"===e.status);return(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,f.jsx)(D,{icon:(0,f.jsx)(n.A,{className:"text-blue-600",size:24}),title:"Team Availability",value:`${i.availabilityPercent}%`,subtitle:`${i.totalMembers-i.currentlyOnLeave}/${i.totalMembers} available`,color:"blue"}),(0,f.jsx)(D,{icon:(0,f.jsx)(l.A,{className:"text-yellow-600",size:24}),title:"Currently on Leave",value:i.currentlyOnLeave,subtitle:"team members",color:"yellow"}),(0,f.jsx)(D,{icon:(0,f.jsx)(p.A,{className:"text-green-600",size:24}),title:"Upcoming Leaves",value:i.upcomingLeaves,subtitle:"in the future",color:"green"})]}),(0,f.jsx)(S,{teamLeaves:s,teamData:r}),(0,f.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[(0,f.jsx)("div",{className:"px-4 sm:px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,f.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,f.jsx)(m,{className:"mr-2 text-gray-600",size:20}),"Team Leave Schedule"]})}),(0,f.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,f.jsxs)("table",{className:"w-full",children:[(0,f.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),(0,f.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Destination"}),(0,f.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),(0,f.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days"}),(0,f.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,f.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>(0,f.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,f.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-xs mr-3",children:e.memberName.split(" ").map(e=>e[0]).join("")}),(0,f.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.memberName})]})}),(0,f.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.destination}),(0,f.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[new Date(e.fromDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",new Date(e.toDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),(0,f.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[e.days," days"]}),(0,f.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"current"===e.status?(0,f.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"On Leave Now"}):(0,f.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Upcoming"})})]},e._id||e.id))})]})}),(0,f.jsx)("div",{className:"md:hidden",children:0===s.length?(0,f.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No leave requests found"}):(0,f.jsx)("div",{className:"divide-y divide-gray-200",children:s.map(e=>(0,f.jsx)("div",{className:"p-4",children:(0,f.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,f.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:e.memberName.split(" ").map(e=>e[0]).join("")}),(0,f.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,f.jsx)("h4",{className:"text-sm font-semibold text-gray-900 truncate",children:e.memberName}),"current"===e.status?(0,f.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"On Leave Now"}):(0,f.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Upcoming"})]}),(0,f.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("span",{className:"font-medium",children:"\ud83d\udccd"}),(0,f.jsx)("span",{className:"ml-2 truncate",children:e.destination})]}),(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("span",{className:"font-medium",children:"\ud83d\udcc5"}),(0,f.jsxs)("span",{className:"ml-2",children:[new Date(e.fromDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ",new Date(e.toDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("span",{className:"font-medium",children:"\u23f1\ufe0f"}),(0,f.jsxs)("span",{className:"ml-2",children:[e.days," days"]})]})]})]})]})},e._id||e.id))})})]})]})}function S(e){let{teamLeaves:s,teamData:t}=e;const[r,l]=(0,a.useState)(new Date);console.log("TeamCalendarCompact received:",{teamLeaves:(null===s||void 0===s?void 0:s.length)||0,leaves:null===s||void 0===s?void 0:s.map(e=>({id:e.id,memberName:e.memberName,fromDate:e.fromDate,toDate:e.toDate,leaveType:e.leaveType}))});const n=r.toLocaleString("default",{month:"long"}),i=r.getFullYear(),o=new Date(i,r.getMonth(),1),d=new Date(i,r.getMonth()+1,0).getDate(),c=o.getDay(),m=[];for(let a=0;a<c;a++)m.push(null);for(let a=1;a<=d;a++){const e=new Date(i,r.getMonth(),a),t=(null===s||void 0===s?void 0:s.filter(s=>{const t=new Date(s.fromDate),a=new Date(s.toDate);return e>=t&&e<=a}))||[];m.push({day:a,date:e,leaves:t})}const x=e=>{l(s=>{const t=new Date(s);return t.setMonth(s.getMonth()+e),t})};return(0,f.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:[(0,f.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 space-y-3 sm:space-y-0",children:[(0,f.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,f.jsx)(p.A,{className:"mr-2 text-blue-600",size:20}),(0,f.jsx)("span",{className:"hidden sm:inline",children:"Team Leave Calendar - "}),(0,f.jsx)("span",{className:"sm:hidden",children:"Calendar - "}),n," ",i]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,f.jsx)("button",{onClick:()=>x(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,f.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,f.jsx)("button",{onClick:()=>l(new Date),className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:"Today"}),(0,f.jsx)("button",{onClick:()=>x(1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,f.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),(0,f.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,f.jsx)("div",{className:"grid grid-cols-7 bg-gray-50 border-b border-gray-200",children:["S","M","T","W","T","F","S"].map((e,s)=>(0,f.jsx)("div",{className:"p-1 sm:p-2 text-center text-xs font-medium text-gray-700",children:e},s))}),(0,f.jsx)("div",{className:"grid grid-cols-7",children:m.map((e,s)=>(0,f.jsx)("div",{className:"min-h-[50px] sm:min-h-[60px] border-r border-b border-gray-200 p-0.5 sm:p-1 "+(null===e?"bg-gray-50":"bg-white hover:bg-gray-50"),children:e&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"text-xs font-medium text-gray-900 mb-1",children:e.day}),(0,f.jsxs)("div",{className:"space-y-0.5",children:[e.leaves.slice(0,1).map((e,s)=>(0,f.jsxs)("div",{className:"text-xs p-0.5 sm:p-1 rounded bg-blue-100 text-blue-800 truncate",title:`${e.memberName}: ${e.type}`,children:[(0,f.jsx)("span",{className:"hidden sm:inline",children:e.memberName.split(" ")[0]}),(0,f.jsx)("span",{className:"sm:hidden",children:e.memberName.split(" ")[0].charAt(0)})]},s)),e.leaves.length>1&&(0,f.jsxs)("div",{className:"text-xs text-gray-500",children:["+",e.leaves.length-1]})]})]})},s))})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-600 mt-3",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,f.jsx)("div",{className:"w-2 h-2 bg-blue-100 rounded"}),(0,f.jsx)("span",{children:"On Leave"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,f.jsx)("div",{className:"w-2 h-2 bg-gray-100 rounded border"}),(0,f.jsx)("span",{children:"Available"})]})]})]})}function D(e){let{icon:s,title:t,value:a,subtitle:r,color:l}=e;return(0,f.jsxs)("div",{className:`${{blue:"bg-blue-50 border-blue-200",yellow:"bg-yellow-50 border-yellow-200",green:"bg-green-50 border-green-200"}[l]} rounded-lg border p-4`,children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[s,(0,f.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:a})]}),(0,f.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:t}),(0,f.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:r})]})}function T(e){let{pendingUsers:s,onRefresh:t}=e;const a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:8000":"https://leave-tracking-backend.onrender.com"),r=localStorage.getItem("token"),l=e=>{navigator.clipboard.writeText(e).then(()=>{alert("\u2705 Copied to clipboard!")}).catch(()=>{alert("\u274c Failed to copy to clipboard")})};return(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Pending Users (",s.length,")"]}),(0,f.jsxs)("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[(0,f.jsx)(p.A,{size:18}),(0,f.jsx)("span",{children:"Refresh"})]})]}),0===s.length?(0,f.jsxs)("div",{className:"bg-green-50 border border-green-200 text-green-700 p-8 rounded-xl text-center",children:[(0,f.jsx)(x.A,{className:"mx-auto mb-4",size:48}),(0,f.jsx)("p",{className:"text-lg font-semibold",children:"No pending users!"}),(0,f.jsx)("p",{className:"text-sm mt-2",children:"All users have completed their account setup."})]}):(0,f.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>{var s;return(0,f.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-orange-200 p-6",children:[(0,f.jsxs)("div",{className:"flex items-center mb-4",children:[(0,f.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,f.jsx)("span",{className:"text-orange-600 font-semibold text-lg",children:e.name.charAt(0).toUpperCase()})}),(0,f.jsxs)("div",{className:"ml-4 flex-1",children:[(0,f.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:e.name}),(0,f.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,f.jsxs)("p",{className:"text-xs text-orange-600 font-medium",children:["Created: ",new Date(e.tempPasswordCreatedAt).toLocaleDateString()]})]})]}),(0,f.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-4",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,f.jsx)("span",{className:"text-sm font-medium text-orange-800",children:"Temporary Password:"}),(0,f.jsx)("button",{onClick:()=>l(e.tempPassword),className:"text-orange-600 hover:text-orange-800 text-sm",children:"\ud83d\udccb Copy"})]}),(0,f.jsx)("div",{className:"bg-white border border-orange-300 rounded px-3 py-2 font-mono text-sm",children:e.tempPassword})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-4",children:[(0,f.jsxs)("span",{children:["Role: ",(0,f.jsx)("span",{className:"font-medium",children:e.role})]}),(0,f.jsxs)("span",{children:["Team: ",(0,f.jsx)("span",{className:"font-medium",children:(null===(s=e.team)||void 0===s?void 0:s.name)||"Unassigned"})]})]}),(0,f.jsxs)("div",{className:"flex space-x-3",children:[(0,f.jsx)("button",{onClick:()=>{const s=`Welcome to the team! Here are your login credentials:\n\nEmail: ${e.email}\nPassword: ${e.tempPassword}\n\nPlease login and change your password.\n\nLogin URL: ${window.location.origin}`;l(s)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors text-sm",children:"\ud83d\udce7 Copy Login Info"}),(0,f.jsx)("button",{onClick:()=>(async e=>{try{const s=await fetch(`${a}/api/users/${e}/clear-temp-password`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(s.ok)alert("\u2705 Temporary password cleared successfully!"),t();else{const e=await s.json();alert(`\u274c Error: ${e.error}`)}}catch(s){console.error("Clear temp password error:",s),alert("\u274c Failed to clear temporary password")}})(e._id),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg transition-colors text-sm",children:"\u2705 Mark Complete"})]})]},e._id)})}),(0,f.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,f.jsx)("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"\ud83d\udca1 Instructions for New Users:"}),(0,f.jsxs)("ol",{className:"text-sm text-blue-700 space-y-1",children:[(0,f.jsx)("li",{children:"1. Share the login credentials with the new user"}),(0,f.jsx)("li",{children:"2. Ask them to login and change their password"}),(0,f.jsx)("li",{children:'3. Click "Mark Complete" once they\'ve logged in'}),(0,f.jsx)("li",{children:"4. Temporary passwords expire after 7 days"})]})]})]})}const L=function(){const[e,s]=(0,a.useState)("members"),[t,d]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),[p,u]=(0,a.useState)(!0),[g,b]=(0,a.useState)(null),[y,j]=(0,a.useState)(null),[v,A]=(0,a.useState)([]),[S,D]=(0,a.useState)(null),[L,P]=(0,a.useState)(0),[E,$]=(0,a.useState)([]),M=localStorage.getItem("token"),_=JSON.parse(localStorage.getItem("user")||"{}"),R=async()=>{if(M)try{const e=await fetch(`${w}/api/leaves/pending`,{headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}});if(e.ok){const s=await e.json();P(s.length)}else P(0)}catch(g){console.error("Error fetching pending approvals count:",g),P(0)}},U=async()=>{if(M)try{const e=await fetch(`${w}/api/users/temp-passwords`,{headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}});if(e.ok){const s=await e.json();$(s.users||[])}}catch(e){console.error("Fetch pending users error:",e)}};(0,a.useEffect)(()=>{M?Promise.allSettled([z(),R(),U()]).then(()=>{console.log("All team data requests completed")}):(b("Please log in to view team data."),u(!1))},[M]);const z=async()=>{if(!M)return b("No authentication token found."),void u(!1);try{u(!0),b(null);const e=await fetch(`${w}/api/teams/my-team`,{headers:{Authorization:`Bearer ${M}`}});if(e.ok){const s=await e.json();console.log("Team data received from API:",s),j(s)}else 404===e.status?(j(null),b(null)):403===e.status?b("Manager access required."):b("Failed to load team data.")}catch(e){console.error("Fetch team error:",e),b("Network error. Please try again.")}finally{u(!1)}};(0,a.useEffect)(()=>{console.log("Team leaves useEffect triggered:",{activeTab:e,teamData:!!y}),"analytics"!==e&&"leaves"!==e||!y||(console.log("Calling fetchTeamLeaves..."),(async()=>{if(null!==y&&void 0!==y&&y.teamId&&M)try{const s=await fetch(`${w}/api/teams/${y.teamId}/leaves`,{headers:{Authorization:`Bearer ${M}`}});if(s.ok){var e;const t=await s.json();console.log("Team leaves received:",{leaves:t.leaves,statistics:t.statistics,leavesCount:(null===(e=t.leaves)||void 0===e?void 0:e.length)||0}),A(t.leaves),D(t.statistics)}else console.error("Failed to fetch team leaves")}catch(s){console.error("Fetch team leaves error:",s)}})())},[e,y]);const O=async e=>{e.preventDefault();const s=new FormData(e.target),t=s.get("teamName"),a=s.get("description");if(t&&0!==t.trim().length)try{const e=await fetch(`${w}/api/teams`,{method:"POST",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"},body:JSON.stringify({name:t.trim(),description:(null===a||void 0===a?void 0:a.trim())||""})});if(e.ok){const s=await e.json();j(s.team),h(!1),alert("\u2705 Team created successfully! You can now add team members.")}else{const s=await e.json();alert(`\u274c Error: ${s.error}`)}}catch(r){console.error("Create team error:",r),alert("\u274c Failed to create team. Please try again.")}else alert("Please enter a team name")};if(p)return(0,f.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,f.jsx)(r.A,{className:"animate-spin text-blue-600",size:48}),(0,f.jsx)("span",{className:"ml-3 text-lg text-gray-600",children:"Loading team data..."})]});if(g)return(0,f.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[(0,f.jsx)(l.A,{className:"mx-auto text-red-600 mb-4",size:64}),(0,f.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Unable to Load Team"}),(0,f.jsx)("p",{className:"text-gray-600",children:g}),(0,f.jsx)("button",{onClick:z,className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg",children:"Try Again"})]});if(!y){const e="admin"===_.role;return(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 border border-blue-200 rounded-xl p-8 text-center",children:[(0,f.jsx)("div",{className:"mx-auto w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mb-6",children:(0,f.jsx)(n.A,{className:"text-blue-600",size:40})}),(0,f.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:e?"No Team Assigned":"Ready to Build Your Team?"}),(0,f.jsx)("p",{className:"text-gray-600 text-lg mb-6 max-w-2xl mx-auto",children:e?"As an admin, you can manage all users through the Admin Panel. If you also manage a specific team, ask another admin to assign you to that team.":"You're set up as a manager, but you don't have a team assigned yet. Let's get you started with your first team!"}),(0,f.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[(0,f.jsxs)("button",{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors shadow-lg",children:[(0,f.jsx)(i.A,{size:20}),(0,f.jsx)("span",{children:"Create Your First Team"})]}),e&&(0,f.jsxs)("button",{onClick:()=>window.location.href="#admin",className:"bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors shadow-lg",children:[(0,f.jsx)(n.A,{size:20}),(0,f.jsx)("span",{children:"Go to Admin Panel"})]}),(0,f.jsxs)("button",{onClick:z,className:"bg-white hover:bg-gray-50 text-blue-600 border-2 border-blue-200 px-8 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-colors",children:[(0,f.jsx)(n.A,{size:20}),(0,f.jsx)("span",{children:"Check Again"})]})]})]}),(0,f.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,f.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,f.jsx)(n.A,{className:"mr-2 text-blue-600",size:20}),"Getting Started as a Manager"]}),(0,f.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,f.jsxs)("div",{className:"text-center p-4",children:[(0,f.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,f.jsx)("span",{className:"text-green-600 font-bold text-lg",children:"1"})}),(0,f.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Create Your Team"}),(0,f.jsx)("p",{className:"text-sm text-gray-600",children:"Set up your team structure and add your first team members"})]}),(0,f.jsxs)("div",{className:"text-center p-4",children:[(0,f.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,f.jsx)("span",{className:"text-blue-600 font-bold text-lg",children:"2"})}),(0,f.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Manage Leaves"}),(0,f.jsx)("p",{className:"text-sm text-gray-600",children:"Approve leave requests and track your team's vacation plans"})]}),(0,f.jsxs)("div",{className:"text-center p-4",children:[(0,f.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,f.jsx)("span",{className:"text-purple-600 font-bold text-lg",children:"3"})}),(0,f.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"View Analytics"}),(0,f.jsx)("p",{className:"text-sm text-gray-600",children:"Monitor team performance and leave patterns"})]})]})]}),(0,f.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:(0,f.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,f.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:(0,f.jsx)("span",{className:"text-yellow-600 text-sm",children:"\ud83d\udca1"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Need Help?"}),(0,f.jsx)("p",{className:"text-yellow-700 text-sm mb-3",children:"If you believe you should have a team assigned, please contact your administrator or check with HR to ensure your manager role is properly configured."}),(0,f.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,f.jsx)("span",{className:"bg-yellow-200 text-yellow-800 px-3 py-1 rounded-full text-xs font-medium",children:"Contact Admin"}),(0,f.jsx)("span",{className:"bg-yellow-200 text-yellow-800 px-3 py-1 rounded-full text-xs font-medium",children:"Check with HR"})]})]})]})}),x&&(0,f.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,f.jsx)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,f.jsxs)("div",{className:"p-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,f.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Your Team"}),(0,f.jsx)("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:(0,f.jsx)(l.A,{size:24})})]}),(0,f.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"teamName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Team Name *"}),(0,f.jsx)("input",{id:"teamName",type:"text",name:"teamName",required:!0,placeholder:"e.g., Engineering Team, Marketing Team",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"teamDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),(0,f.jsx)("textarea",{id:"teamDescription",name:"description",rows:3,placeholder:"Brief description of your team's purpose...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),(0,f.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,f.jsxs)("p",{className:"text-blue-800 text-sm",children:[(0,f.jsx)("strong",{children:"Note:"})," You'll be automatically added as the team manager and first member. You can add more team members after creating the team."]})}),(0,f.jsxs)("div",{className:"flex space-x-3",children:[(0,f.jsx)("button",{type:"button",onClick:()=>h(!1),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Cancel"}),(0,f.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Create Team"})]})]})]})})})]})}return(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,f.jsx)(n.A,{className:"mr-3 text-blue-600",size:32}),y.teamName]}),(0,f.jsxs)("p",{className:"text-gray-600 mt-1",children:["Manager: ",y.manager.name]})]}),(0,f.jsx)("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-semibold",children:"Manager"})]})}),(0,f.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,f.jsx)("div",{className:"border-b border-gray-200",children:(0,f.jsxs)("nav",{className:"flex flex-wrap gap-2 sm:gap-8 px-3 sm:px-6 overflow-x-auto","aria-label":"Team tabs",children:[(0,f.jsx)("button",{onClick:()=>s("members"),className:"py-3 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors whitespace-nowrap "+("members"===e?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,f.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[(0,f.jsx)(n.A,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),(0,f.jsx)("span",{className:"hidden sm:inline",children:"Team Members"}),(0,f.jsx)("span",{className:"sm:hidden",children:"Members"}),(0,f.jsx)("span",{className:"bg-gray-200 text-gray-700 px-1.5 sm:px-2 py-0.5 rounded-full text-xs",children:y.members.length})]})}),(0,f.jsx)("button",{onClick:()=>s("approvals"),className:"py-3 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors whitespace-nowrap "+("approvals"===e?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,f.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[(0,f.jsx)(o.A,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),(0,f.jsx)("span",{className:"hidden sm:inline",children:"Leave Approvals"}),(0,f.jsx)("span",{className:"sm:hidden",children:"Approvals"}),L>0?(0,f.jsx)("span",{className:"bg-red-100 text-red-700 px-1.5 sm:px-2 py-0.5 rounded-full text-xs font-medium",children:L}):(0,f.jsx)("span",{className:"bg-gray-100 text-gray-600 px-1.5 sm:px-2 py-0.5 rounded-full text-xs",children:"0"})]})}),(0,f.jsx)("button",{onClick:()=>s("pending"),className:"py-3 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors whitespace-nowrap "+("pending"===e?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,f.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[(0,f.jsx)(c,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),(0,f.jsx)("span",{className:"hidden sm:inline",children:"Pending Users"}),(0,f.jsx)("span",{className:"sm:hidden",children:"Pending"}),E.length>0?(0,f.jsx)("span",{className:"bg-orange-100 text-orange-700 px-1.5 sm:px-2 py-0.5 rounded-full text-xs font-medium",children:E.length}):(0,f.jsx)("span",{className:"bg-gray-100 text-gray-600 px-1.5 sm:px-2 py-0.5 rounded-full text-xs",children:"0"})]})}),(0,f.jsx)("button",{onClick:()=>s("analytics"),className:"py-3 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors whitespace-nowrap "+("analytics"===e?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,f.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[(0,f.jsx)(m,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),(0,f.jsx)("span",{className:"hidden sm:inline",children:"Team Analytics"}),(0,f.jsx)("span",{className:"sm:hidden",children:"Analytics"}),(0,f.jsx)("span",{className:"bg-gray-200 text-gray-700 px-1.5 sm:px-2 py-0.5 rounded-full text-xs",children:(null===S||void 0===S?void 0:S.totalLeaves)||0})]})})]})}),(0,f.jsx)("div",{className:"p-6",children:"members"===e?(0,f.jsx)(k,{members:y.members,showAddMember:t,setShowAddMember:d,onRemoveMember:async e=>{if(window.confirm("Remove this team member?"))try{const s=await fetch(`${w}/api/teams/${y.teamId}/members/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${M}`}});if(s.ok)z();else{const e=await s.json();alert(`Error: ${e.error}`)}}catch(s){console.error("Remove member error:",s),alert("Failed to remove member")}},onAddMember:async e=>{e.preventDefault();const s=new FormData(e.target),t=s.get("email"),a=s.get("position")||"Employee";console.log("Adding member with:",{userEmail:t,position:a,teamId:y.teamId});try{const e=await fetch(`${w}/api/teams/${y.teamId}/members`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M}`},body:JSON.stringify({userEmail:t,position:a})});if(e.ok){const s=await e.json();d(!1),z(),s.wasNewUser&&s.tempPassword?alert(`\u2705 New user created and added to team!\n\n\ud83d\udc64 User: ${s.member.name} (${s.member.email})\n\ud83c\udff7\ufe0f Access Role: ${s.member.role}\n\ud83d\udcbc Position: ${s.member.position}\n\ud83d\udd10 Temporary Password: ${s.tempPassword}\n\n\ud83d\udce7 Please share these login credentials with the new user. They should change their password on first login.`):alert(`\u2705 Member added to team successfully!\n\n\ud83d\udc64 User: ${s.member.name} (${s.member.email})\n\ud83c\udff7\ufe0f Access Role: ${s.member.role}\n\ud83d\udcbc Position: ${s.member.position}`)}else{const s=await e.json();console.error("Add member error response:",s),alert(`Error: ${s.error}`)}}catch(r){console.error("Add member error:",r),alert("Failed to add member")}}}):"approvals"===e?(0,f.jsx)(N,{onApprovalChange:R}):"pending"===e?(0,f.jsx)(T,{pendingUsers:E,onRefresh:U}):(0,f.jsx)(C,{leaves:v,members:y.members,statistics:S,teamData:y})})]})]})}},855:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(784).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},884:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(784).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])}}]);
//# sourceMappingURL=169.2f983d78.chunk.js.map