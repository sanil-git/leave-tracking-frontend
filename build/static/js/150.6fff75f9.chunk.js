/*! For license information please see 150.6fff75f9.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkleave_tracking_app=self.webpackChunkleave_tracking_app||[]).push([[150],{150:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var t=s(43),r=s(646),n=s(919);const l=(0,s(784).A)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var i=s(812),d=s(88),o=s(855),c=s(6),x=s(117),h=s(579);const m=t.lazy(()=>s.e(171).then(s.bind(s,171))),u=t.lazy(()=>s.e(876).then(s.bind(s,876))),p=e=>{let{leaveBalances:a={EL:12,SL:8,CL:3},holidays:s=[],vacations:p=[],onNavigateToDate:g,onUpdateLeaveBalances:v,onDeleteVacation:b,isLoading:j=!1,aiInsights:y={},aiLoading:N={},aiError:w={},weatherData:f={},allWeatherData:D={},weatherLoading:L=!1,weatherError:k=null}=e;const{t:E}=(0,x.Bd)(),[S,C]=(0,t.useState)(!1),[M,_]=(0,t.useState)(a),[A,I]=(0,t.useState)(!1),[F,H]=(0,t.useState)(null),[T,B]=(0,t.useState)(!1),[z,V]=(0,t.useState)(!1),W=(0,t.useRef)(),U=(0,t.useRef)();(0,t.useEffect)(()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target===W.current&&B(!0),e.target===U.current&&V(!0))})},{rootMargin:"100px"});return W.current&&e.observe(W.current),U.current&&e.observe(U.current),()=>e.disconnect()},[]);const $=(0,t.useMemo)(()=>{const e=new Date;e.setHours(0,0,0,0);const a=s.filter(a=>{const s=new Date(a.date),t=s.getDay();return(1===t||5===t)&&s>=e}),t=[],r=new Set;return a.forEach(e=>{const a=`${e.name}-${e.date}`;r.has(a)||(r.add(a),t.push(e))}),t},[s]),O=(0,t.useMemo)(()=>{if(!p||0===p.length)return[];const e=new Date;e.setHours(0,0,0,0);return p.filter(a=>{const s=new Date(a.toDate||a.endDate);return s.setHours(0,0,0,0),s>=e}).sort((e,a)=>new Date(e.fromDate||e.startDate)-new Date(a.fromDate||a.startDate))},[p]),R=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),P=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long"}),X=e=>{g&&g(new Date(e))};return(0,h.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-6xl mx-auto",children:[(0,h.jsxs)("div",{className:"flex items-center mb-6",children:[(0,h.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:(0,h.jsx)(r.A,{className:"w-5 h-5 text-purple-600"})}),(0,h.jsx)("div",{children:(0,h.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:E("dashboard.title")})})]}),(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(n.A,{className:"w-5 h-5 text-purple-600 mr-2"}),(0,h.jsx)("h4",{className:"font-semibold text-gray-800",children:E("dashboard.leaveBalances")})]}),(0,h.jsxs)("button",{onClick:S?async()=>{if(v&&!A){I(!0);try{await v(M),C(!1)}catch(e){console.error("Error saving leave balances:",e)}finally{I(!1)}}}:()=>{_(a),C(!0)},disabled:A,className:"flex items-center text-sm px-3 py-1 rounded-lg transition-colors duration-200 "+(A?"bg-purple-100 text-purple-400 cursor-not-allowed":"bg-purple-100 text-purple-700 hover:bg-purple-200"),"aria-label":S?A?"Saving leave balances":"Save leave balance changes":"Edit leave balances",tabIndex:0,children:[(0,h.jsx)(l,{className:"w-4 h-4 mr-1"}),E(S?A?"dashboard.saving":"dashboard.save":"dashboard.edit")]})]}),(0,h.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,h.jsx)("div",{className:"bg-purple-50 rounded-lg p-3 hover:shadow-md transition-shadow",children:(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:E("dashboard.earnedLeave")}),S?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("label",{htmlFor:"insights-el-balance",className:"sr-only",children:"Edit Earned Leave balance"}),(0,h.jsx)("input",{id:"insights-el-balance",name:"insights-el-balance",type:"number",value:M.EL||"",onChange:e=>_(a=>({...a,EL:parseInt(e.target.value)||0})),className:"w-full text-2xl font-bold text-purple-700 text-center bg-transparent border-none outline-none",min:"0",step:"1"})]}):(0,h.jsx)("div",{className:"text-2xl font-bold text-purple-700",children:a.EL})]})}),(0,h.jsx)("div",{className:"bg-green-50 rounded-lg p-3 hover:shadow-md transition-shadow",children:(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:E("dashboard.sickLeave")}),S?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("label",{htmlFor:"insights-sl-balance",className:"sr-only",children:"Edit Sick Leave balance"}),(0,h.jsx)("input",{id:"insights-sl-balance",name:"insights-sl-balance",type:"number",value:M.SL||"",onChange:e=>_(a=>({...a,SL:parseInt(e.target.value)||0})),className:"w-full text-2xl font-bold text-green-700 text-center bg-transparent border-none outline-none",min:"0",step:"1"})]}):(0,h.jsx)("div",{className:"text-2xl font-bold text-green-700",children:a.SL})]})}),(0,h.jsx)("div",{className:"bg-blue-50 rounded-lg p-3 hover:shadow-md transition-shadow",children:(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:E("dashboard.casualLeave")}),S?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("label",{htmlFor:"insights-cl-balance",className:"sr-only",children:"Edit Casual Leave balance"}),(0,h.jsx)("input",{id:"insights-cl-balance",name:"insights-cl-balance",type:"number",value:M.CL||"",onChange:e=>_(a=>({...a,CL:parseInt(e.target.value)||0})),className:"w-full text-2xl font-bold text-blue-700 text-center bg-transparent border-none outline-none",min:"0",step:"1"})]}):(0,h.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:a.CL})]})})]})]}),(0,h.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[(0,h.jsxs)("div",{className:"flex items-center mb-4",children:[(0,h.jsx)(r.A,{className:"w-5 h-5 text-orange-600 mr-2"}),(0,h.jsx)("h4",{className:"font-semibold text-gray-800",children:E("opportunities.longWeekend")})]}),0===$.length?(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:E("opportunities.noOpportunities")}):(0,h.jsx)("div",{className:"space-y-3",children:$.map(e=>(0,h.jsx)("div",{className:"p-4 bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 hover:scale-[1.02]",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h4",{className:"font-medium text-orange-900",children:e.name}),(0,h.jsx)("p",{className:"text-sm text-orange-700",children:(0,h.jsxs)("span",{onClick:()=>X(e.date),className:"cursor-pointer hover:text-orange-800 hover:underline transition-colors duration-200",title:"Click to navigate to this date on calendar",children:[P(e.date)," \u2022 ",R(e.date)]})})]}),(0,h.jsx)("div",{className:"text-xs bg-orange-200 text-orange-800 px-2 py-1 rounded-full",children:P(e.date).substring(0,3)})]})},e._id))})]}),(0,h.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:[(0,h.jsxs)("div",{className:"flex items-center mb-4",children:[(0,h.jsx)(i.A,{className:"w-5 h-5 text-purple-600 mr-2"}),(0,h.jsx)("h4",{className:"font-semibold text-gray-800",children:E("opportunities.planned")})]}),0===O.length?(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:E("opportunities.noVacations")}):(0,h.jsx)("div",{className:"space-y-3",children:O.map(e=>{var a,s,t,r;const n=e._id||e.name,l=y[n],i=N[n],x=w[n],m=null===l||void 0===l||null===(a=l.ai_analysis)||void 0===a||null===(s=a.current_destination_analysis)||void 0===s?void 0:s.score,u=null===l||void 0===l||null===(t=l.ai_analysis)||void 0===t||null===(r=t.ai_insights)||void 0===r?void 0:r.smart_suggestion,p=F===n;return(0,h.jsxs)("div",{className:"group p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 hover:scale-[1.02] relative",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,h.jsxs)("h4",{className:"font-medium text-purple-900",children:[e.name,e.destination&&(0,h.jsxs)("span",{className:"font-medium text-purple-900",children:[" (",e.destination,")"]})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[i?(0,h.jsx)("div",{className:"w-8 h-6 bg-gray-200 rounded-full"}):m?(0,h.jsxs)("div",{className:"px-2 py-1 text-xs font-bold rounded-full cursor-pointer "+(m>=8?"bg-green-100 text-green-800":m>=6?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),title:"Hover for AI suggestion",onMouseEnter:()=>{H(n)},onMouseLeave:()=>{H(null)},children:[parseFloat(m).toFixed(1),"/10"]}):x?(0,h.jsx)("div",{className:"px-2 py-1 text-xs text-red-600 bg-red-50 rounded-full",children:"Error"}):null,(0,h.jsxs)("div",{className:"flex items-center text-sm text-purple-700",children:[(0,h.jsx)(d.A,{className:"w-3 h-3 mr-1"}),e.days||e.duration||"N/A"," ",E("opportunities.days")]}),e.leaveType&&(0,h.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("EL"===e.leaveType?"bg-blue-100 text-blue-800":"SL"===e.leaveType?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.leaveType}),b&&(0,h.jsx)("button",{onClick:()=>(async e=>{if(b&&window.confirm("Are you sure you want to delete this vacation?"))try{await b(e)}catch(a){console.error("Error deleting vacation:",a),alert("Failed to delete vacation. Please try again.")}})(e._id),className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-1 text-red-600 hover:text-red-700 hover:bg-red-100 rounded-md",title:"Delete vacation","aria-label":`Delete vacation: ${e.name}`,tabIndex:0,children:(0,h.jsx)(o.A,{className:"w-4 h-4"})})]})]}),p&&u&&(0,h.jsx)("div",{className:"absolute text-xs text-black bg-white border border-gray-300 rounded px-2 py-1 shadow-lg",style:{top:"-40px",left:"50%",transform:"translateX(-50%)",maxWidth:"300px",zIndex:99999},onMouseEnter:()=>{H(n)},onMouseLeave:()=>{H(null)},children:u}),(0,h.jsxs)("div",{className:"flex items-center text-sm text-purple-700",children:[(0,h.jsx)(c.A,{className:"w-3 h-3 mr-1"}),(0,h.jsx)("span",{onClick:()=>X(e.fromDate||e.startDate),className:"cursor-pointer hover:text-purple-800 hover:underline transition-colors duration-200",title:"Click to navigate to start date",children:R(e.fromDate||e.startDate)}),(0,h.jsx)("span",{className:"mx-2",children:"-"}),(0,h.jsx)("span",{onClick:()=>X(e.toDate||e.endDate),className:"cursor-pointer hover:text-purple-800 hover:underline transition-colors duration-200",title:"Click to navigate to end date",children:R(e.toDate||e.endDate)})]}),e.description&&(0,h.jsxs)("p",{className:"text-sm text-purple-600 mt-2 italic",children:['"',e.description,'"']})]},e._id)})})]}),(0,h.jsx)("div",{ref:W,children:T?(0,h.jsx)(t.Suspense,{fallback:(0,h.jsx)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:(0,h.jsxs)("div",{className:"animate-pulse flex space-x-4",children:[(0,h.jsx)("div",{className:"rounded-full bg-gray-200 h-10 w-10"}),(0,h.jsxs)("div",{className:"flex-1 space-y-2 py-1",children:[(0,h.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,h.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})]})}),children:(0,h.jsx)(m,{leaveBalances:a,holidays:s,vacations:p,aiInsights:y,aiLoading:N,aiError:w,weatherData:f,allWeatherData:D,weatherLoading:L,weatherError:k})}):(0,h.jsx)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm h-32 flex items-center justify-center",children:(0,h.jsx)("div",{className:"text-gray-400 text-sm",children:"Smart Insights loading..."})})}),(0,h.jsx)("div",{ref:U,children:z?(0,h.jsx)(t.Suspense,{fallback:(0,h.jsx)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:(0,h.jsxs)("div",{className:"animate-pulse flex space-x-4",children:[(0,h.jsx)("div",{className:"rounded-full bg-gray-200 h-10 w-10"}),(0,h.jsxs)("div",{className:"flex-1 space-y-2 py-1",children:[(0,h.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,h.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})]})}),children:(0,h.jsx)(u,{vacations:p,onNavigateToDate:g})}):(0,h.jsx)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm h-32 flex items-center justify-center",children:(0,h.jsx)("div",{className:"text-gray-400 text-sm",children:"Historical data loading..."})})})]})]})}},855:(e,a,s)=>{s.d(a,{A:()=>t});const t=(0,s(784).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}}]);
//# sourceMappingURL=150.6fff75f9.chunk.js.map