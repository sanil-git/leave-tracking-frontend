/*! For license information please see 60.fdf6646a.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkleave_tracking_app=self.webpackChunkleave_tracking_app||[]).push([[60],{24:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(784).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},56:(e,t,a)=>{a.d(t,{A:()=>x});a(43);var s=a(646),r=a(812);const n=(0,a(784).A)("party-popper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);var d=a(6),o=a(88),l=a(919),i=a(233),c=a(118),m=a(54),h=a(944),u=a(579);const x=e=>{let{name:t,size:a=20,className:x="",color:y,...g}=e;const f={calendar:s.A,vacation:r.A,holiday:n,location:d.A,time:o.A,trending:l.A,notification:i.A,team:c.A,success:m.A,star:h.A,beach:()=>(0,u.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",className:x,...g,children:(0,u.jsx)("path",{fill:y||"currentColor",d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2M21 9V7L15 1L13.5 2.5L16.17 5.17L10.5 10.84L15.17 15.51L21 9.68V9M7.5 12L10 14.5L8.5 16L6 13.5L7.5 12M2.81 15.78L5.93 18.9L4.52 20.31L1.39 17.19L2.81 15.78M8.5 18L11 20.5L9.5 22L7 19.5L8.5 18M13 19C11.9 19 11 19.9 11 21C11 22.1 11.9 23 13 23C14.1 23 15 22.1 15 21C15 19.9 14.1 19 13 19Z"})}),party:()=>(0,u.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",className:x,...g,children:(0,u.jsx)("path",{fill:y||"currentColor",d:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6L14,10L18,10L15,13L16,17L12,15L8,17L9,13L6,10L10,10L12,6Z"})}),"calendar-icon":()=>(0,u.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",className:x,...g,children:(0,u.jsx)("path",{fill:y||"currentColor",d:"M19,3H18V1H16V3H8V1H6V3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V8H19V19Z"})})},p=f[t]||f[t.toLowerCase()];return p?"function"!==typeof p||p.$$typeof?(0,u.jsx)(p,{size:a,className:x,color:y,...g}):(0,u.jsx)(p,{}):(console.warn(`Icon "${t}" not found in OptimizedIcon component`),(0,u.jsx)("span",{className:x,...g,children:"?"}))}},60:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var s=a(43),r=a(117),n=a(784);const d=(0,n.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),o=(0,n.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var l=a(326),i=a(24),c=a(855),m=a(579);const h=(0,s.memo)(e=>{let{holidays:t,onAddHoliday:a,onDeleteHoliday:r,API_BASE_URL:n,token:h,isLoading:u=!1}=e;const[x,y]=(0,s.useState)(""),[g,f]=(0,s.useState)(""),[p,b]=(0,s.useState)(!1),[j,v]=(0,s.useState)(new Set),N=(0,s.useMemo)(()=>{if(!Array.isArray(t))return[];const e=[],a=new Set;return t.forEach(t=>{const s=`${t.name}-${t.date}`;a.has(s)||(a.add(s),e.push(t))}),e.sort((e,t)=>new Date(e.date)-new Date(t.date)),e},[t]);return(0,m.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,m.jsx)("form",{onSubmit:e=>{if(e.preventDefault(),x.trim()&&g){const e=x.trim();if(t.some(t=>t.name===e||t.date===g))return void alert("A holiday with the same name or date already exists. Please choose a different name or date.");a({name:e,date:g}),y(""),f("")}},className:"mb-4 md:mb-6",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"holidayName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Holiday Name"}),(0,m.jsx)("input",{type:"text",id:"holidayName",name:"holidayName",value:x,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 md:py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm md:text-base touch-manipulation",placeholder:"e.g., Company Holiday",required:!0})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"holidayDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,m.jsx)("input",{type:"date",id:"holidayDate",name:"holidayDate",value:g,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 md:py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm md:text-base touch-manipulation",required:!0})]}),(0,m.jsx)("div",{className:"flex items-end",children:(0,m.jsxs)("button",{type:"submit",className:"w-full flex items-center justify-center px-4 py-2 md:py-3 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",children:[(0,m.jsx)(d,{className:"w-4 h-4 mr-2"}),"Add Holiday"]})})]})}),(0,m.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,m.jsxs)("button",{onClick:()=>b(!p),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors duration-200",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,m.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Current Holidays"}),(0,m.jsx)("span",{className:"text-sm text-gray-500",children:u?"Loading...":`(${N.length} unique)`})]}),p?(0,m.jsx)(o,{className:"w-5 h-5 text-gray-500"}):(0,m.jsx)(l.A,{className:"w-5 h-5 text-gray-500"})]}),p&&(0,m.jsx)("div",{className:"border-t border-gray-200 p-4",children:0===t.length?(0,m.jsx)("p",{className:"text-gray-500 text-sm",children:"No holidays added yet."}):(0,m.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:N.map(e=>{return(0,m.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border",children:[(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),(0,m.jsx)("p",{className:"text-sm text-gray-600",children:(t=e.date,new Date(t).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))})]}),(0,m.jsx)("button",{onClick:async()=>{v(t=>new Set(t).add(e._id));try{await r(e._id)}finally{v(t=>{const a=new Set(t);return a.delete(e._id),a})}},disabled:j.has(e._id),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete holiday",children:j.has(e._id)?(0,m.jsx)(i.A,{className:"w-4 h-4 animate-spin"}):(0,m.jsx)(c.A,{className:"w-4 h-4"})})]},e._id);var t})})})]})]})});var u=a(819);const x=(0,n.A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),y=(0,n.A)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]),g=(0,s.memo)(e=>{let{onAddHoliday:t,API_BASE_URL:a,token:r,existingHolidays:n=[]}=e;const[o,l]=(0,s.useState)([]),[i,c]=(0,s.useState)(!1),[h,g]=(0,s.useState)(null),[f,p]=(0,s.useState)(!1),b=(new Date).getFullYear(),j=(0,s.useRef)(null),v=(0,s.useRef)(null),N=(0,s.useMemo)(()=>{if(!Array.isArray(o))return[];if(!Array.isArray(n))return o;const e=o.filter(e=>{const t="object"===typeof e.date&&e.date.iso?e.date.iso:e.date;return!n.some(a=>a.name===e.name&&a.date===t)});return e.sort((e,t)=>{const a="object"===typeof e.date&&e.date.iso?e.date.iso:e.date,s="object"===typeof t.date&&t.date.iso?t.date.iso:t.date;return new Date(a)-new Date(s)}),e},[o,n]),w=(0,s.useCallback)(async()=>{c(!0),g(null);try{const e=await fetch(`${a}/holidays/official?year=${b}`,{headers:{Authorization:`Bearer ${r}`}});if(e.ok){const t=await e.json(),a=t.holidays||t;l(a)}else{const t=await e.text();console.error("API Error response:",t),g(`API Error: ${e.status} - ${e.statusText}`),l([])}}catch(h){console.error("Network error:",h),g(`Network Error: ${h.message}`),l([])}finally{c(!1)}},[a,r,b]),A=(0,s.useCallback)(e=>{let a;if("object"===typeof e.date&&e.date.iso)a=e.date.iso;else{if("string"!==typeof e.date)return void console.error("Cannot determine date format for holiday:",e);a=e.date}const s={name:e.name,date:a};t(s)},[t]),k=(0,s.useCallback)(e=>{let t;if("object"===typeof e&&e.iso)t=new Date(e.iso);else{if("string"!==typeof e)return"Invalid Date";t=new Date(e)}return isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},[]),L=(0,s.useCallback)(e=>{let t;if("object"===typeof e&&e.iso)t=new Date(e.iso);else{if("string"!==typeof e)return"Invalid Date";t=new Date(e)}if(isNaN(t.getTime()))return"Invalid Date";const a=t.toLocaleDateString("en-US",{weekday:"short"}),s=t.getDate(),r=t.toLocaleDateString("en-US",{month:"short"});return`${a} ${s}${(e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(s)} ${r}`},[]);return(0,s.useEffect)(()=>{0===o.length&&w()},[f,o.length,w]),(0,s.useEffect)(()=>{const e=e=>{v.current&&v.current.contains(e.target)||!f||j.current&&j.current.contains(e.target)||p(!1)};return f&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[f]),(0,m.jsxs)("div",{className:"relative bg-white rounded-lg shadow border border-gray-200",children:[(0,m.jsxs)("button",{ref:v,onClick:()=>p(!f),className:"w-full flex items-center justify-center px-4 py-2 md:py-3 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition-all duration-300 border bg-white text-gray-700 hover:bg-gray-50 border-gray-300",children:[(0,m.jsx)("span",{children:"Official Holidays:"}),(0,m.jsx)("span",{children:"\ud83c\uddee\ud83c\uddf3"})]}),f&&(0,m.jsxs)("div",{ref:j,className:"absolute top-full right-0 mt-3 w-80 bg-white rounded-2xl shadow-2xl border border-gray-100 p-5 space-y-4 z-20",children:[(0,m.jsxs)("div",{className:"text-center border-b border-gray-100 pb-3",children:[(0,m.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-1",children:i?"Loading holidays...":`${N.length} holidays available`}),(0,m.jsxs)("div",{className:"text-xs text-gray-500",children:["\ud83d\udcc5 Sorted by date (earliest first) \u2022 ",b]})]}),h&&(0,m.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)(u.A,{className:"w-4 h-4 text-red-600"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm text-red-700",children:h}),(0,m.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:["Endpoint: ",(0,m.jsx)("code",{className:"bg-red-100 px-1 rounded",children:"/holidays/official"})]})]})]})}),(0,m.jsx)("div",{className:"space-y-2",children:i?(0,m.jsxs)("div",{className:"text-center py-4",children:[(0,m.jsx)(x,{className:"w-6 h-6 text-orange-600 animate-spin mx-auto mb-2"}),(0,m.jsx)("p",{className:"text-sm text-gray-600",children:"Loading..."})]}):o.length>0?(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Holiday to Add"}),(0,m.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",onChange:e=>{const t=o.find(t=>t.name===e.target.value);t&&(A(t),e.target.value="")},defaultValue:"",children:[(0,m.jsx)("option",{value:"",disabled:!0,children:"Choose a holiday to add..."}),N.map((e,t)=>(0,m.jsxs)("option",{value:e.name,children:[e.name," - ",k(e.date)]},`${e.name}-${e.date}`))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quick Add All"}),(0,m.jsx)("div",{className:"grid grid-cols-2 gap-2",children:N.map(e=>(0,m.jsxs)("button",{onClick:()=>A(e),className:"flex items-center justify-between p-2.5 bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg border border-orange-200 hover:from-orange-100 hover:to-amber-100 hover:border-orange-300 transition-all duration-200 hover:shadow-sm",children:[(0,m.jsxs)("div",{className:"flex-1 min-w-0 text-left",children:[(0,m.jsx)("span",{className:"text-xs font-medium text-gray-900 truncate block leading-tight",children:e.name}),(0,m.jsx)("span",{className:"text-xs text-gray-600 block leading-tight",children:L(e.date)})]}),(0,m.jsx)(d,{className:"w-3 h-3 text-orange-600 ml-2"})]},`${e.name}-${e.date}`))})]})]}):h?null:(0,m.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,m.jsx)(y,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,m.jsx)("p",{className:"text-sm",children:0===N.length&&o.length>0?`All ${o.length} holidays are already added!`:"No holidays found"})]})}),(0,m.jsx)("div",{className:"flex justify-center pt-2",children:(0,m.jsxs)("button",{onClick:w,disabled:i,className:"flex items-center space-x-2 px-4 py-2.5 text-sm font-medium text-orange-600 hover:text-orange-700 hover:bg-orange-50 rounded-lg transition-all duration-200 border border-orange-200 hover:border-orange-300",children:[(0,m.jsx)(x,{className:"w-4 h-4 "+(i?"animate-spin":"")}),(0,m.jsx)("span",{children:"Refresh Holidays"})]})})]})]})});var f=a(56);const p=e=>{let{holidays:t,onAddHoliday:a,onDeleteHoliday:s,API_BASE_URL:n,token:d,isLoading:o}=e;const{t:l}=(0,r.Bd)();return(0,m.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mr-3",children:(0,m.jsx)(f.A,{name:"party",size:20,color:"#ea580c"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:l("holiday.management")}),(0,m.jsx)("p",{className:"text-sm text-gray-600",children:l("holiday.manageDescription")})]})]}),(0,m.jsx)(g,{onAddHoliday:a,API_BASE_URL:n,token:d,existingHolidays:t})]}),(0,m.jsx)(h,{holidays:t,API_BASE_URL:n,token:d,onAddHoliday:a,onDeleteHoliday:s,isLoading:o})]})}},326:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(784).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},855:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(784).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}}]);
//# sourceMappingURL=60.fdf6646a.chunk.js.map